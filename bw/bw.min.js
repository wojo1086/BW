!function(r){function o(r,o,t){var c=Math.ceil(.299*r+.587*o+.114*t);return c}r.fn.bw=function(){r(this).find("*").each(function(){var t=r(this).css(["background-color","color","border-top-color","border-right-color","border-bottom-color","border-left-color"]),c=r(this);r.each(t,function(r,t){var i=t.split("(");if("rgb"==i[0]){var l=t.split(")");t=l[0]+",1"+l[1]}var n=t.split(",");n[0]=n[0].split("(").pop(),n[3]=n[3].split(")").splice(0,1);var s=o(n[0],n[1],n[2]);c.css(r,"rgba("+s+","+s+","+s+","+n[3]+")")})})}}(jQuery);